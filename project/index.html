<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StarW1N КЕЙСЫ</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&display=swap" rel="stylesheet">
<style>
  body{
    margin:0;
    background:#0a0f1a;
    font-family:'Montserrat',sans-serif;
    height:200vh;
  }

  /* —————— БАЗОВЫЙ СТИЛЬ (ПК) —————— */
  .logo-bar{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    padding:20px 0;
    display:flex;
    justify-content:center;
    background:#0a0f1a;
    z-index:999;
    transition:transform .1s,opacity .1s;
  }
  .logo{
    font-weight:900;
    font-size:60px;
    letter-spacing:-4px;
    transform:skewX(-12deg);
    user-select:none;
  }
  .gradient-text{ 
    background:linear-gradient(90deg,#4d9fff,#5d6bff,#904bff); 
    -webkit-background-clip:text; 
    color:transparent;
  }
  .white1{ color:#fff; }

  .cases-bar{
    position:fixed;
    top:150px;
    left:0;
    width:100%;
    display:flex;
    justify-content:center;
    gap:20px;
    z-index:998;
    transition:transform .1s,opacity .1s;
  }

  .case{
    width:150px;
    height:200px;
    background:#1a1f35;
    border-radius:15px;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:10px;
    cursor:pointer;
  }
  .case img.case-image{
    width:100%;
    height:120px;
    object-fit:cover;
    margin-bottom:10px;
  }
  .case .case-name{ 
    color:#fff; 
    font-size:20px; 
    font-weight:700; 
  }

  .case-opened{
    position:fixed;
    top:90%;
    left:90%;
    transform:translate(-50%,-50%);
    width:520px;
    background:#1a1f35;
    border-radius:20px;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:25px;
    z-index:1000;
  }

  .case-logo{ 
    position:absolute; 
    top:18px; left:18px; 
    cursor:pointer; 
  }
  .case-logo .logo{
    font-size:35px;
    transform:skewX(-12deg);
  }

  .open-button{
    margin-top:16px;
    padding:12px 26px;
    background:#333;
    color:#fff;
    border:none;
    border-radius:12px;
    font-size:17px;
    cursor:pointer;
  }

  .items-list{ 
    display:flex; 
    flex-wrap:wrap; 
    justify-content:center; 
    gap:10px; 
    margin-top:18px; 
  }

  .item-slot{
    width:60px;
    height:75px;
    display:flex;
    flex-direction:column;
    align-items:center;
    margin:5px;
    position:relative;
  }
  .item-slot img{
    width:60px;
    height:60px;
    border-radius:10px;
    object-fit:cover;
  }

  .rarity{ 
    position:absolute; 
    bottom:5px; 
    left:50%; 
    transform:translateX(-50%); 
    width:10px; 
    height:10px; 
    border-radius:50%; 
  }
  .rarity.white{ background:white; }
  .rarity.red{ background:red; }

  /* ---------- РУЛЕТКА ---------- */
  .roulette{
      width:420px;
      height:130px;
      overflow:hidden;
      border-radius:12px;
      margin-top:16px;
      background:#000;
      position:relative;
      border:2px solid rgba(255,255,255,.04);
  }
  .roulette::after{
      content:"";
      position:absolute; 
      top:0; bottom:0; 
      left:50%; width:4px; 
      transform:translateX(-50%); 
      background:rgba(255,255,255,.06);
      pointer-events:none;
  }
  .roulette-track{
      display:flex; 
      position:absolute; 
      left:0; top:0; 
      height:130px; 
      will-change: transform;
  }
  .roulette-item{
      width:140px;
      height:130px;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:6px;
      box-sizing:border-box;
  }
  .roulette-item img{
      width:100%; 
      height:100%; 
      object-fit:cover; 
      border-radius:8px;
  }

  .result-block{
      margin-top:18px;
      display:none;
      flex-direction:column;
      align-items:center;
  }
  .result-title{
      color:#fff; 
      font-size:22px; 
      font-weight:700;
  }
  .result-actions{
      display:flex;
      gap:14px;
      margin-top:12px;
  }
  .result-btn{
      padding:10px 18px;
      border:none;
      border-radius:10px;
      cursor:pointer;
      font-weight:700;
  }
  .sell{ background:#ff4e4e; color:#fff; }
  .keep{ background:#4eff7a; color:#000; }

  /* ——————————————————————————
     АДАПТИВНОСТЬ ДЛЯ МОБИЛОК
     —————————————————————————— */

  /* ≤ 900px — планшеты */
  @media (max-width: 900px){
    .logo{ font-size:45px; }
    .cases-bar{ top:120px; }
    .case{ width:130px; height:180px; }
    .case-opened{ width:80%; }
    .roulette{ width:90%; }
  }

  /* ≤ 600px — телефоны */
  @media (max-width: 600px){
    .logo{ font-size:32px; }
    .logo-bar{ padding:12px 0; }
    .cases-bar{ top:100px; gap:12px; }

    .case{
      width:120px;
      height:160px;
      padding:8px;
    }
    .case .case-name{ font-size:16px; }

    .case-opened{
      width:95%;
      padding:14px;
      border-radius:14px;
    }
    .case-logo .logo{ font-size:26px; }

    .roulette{
      width:100%;
      height:110px;
    }
    .roulette-item{
      width:110px;
      height:110px;
    }

    .open-button{
      padding:10px 20px;
      font-size:15px;
    }

    .result-title{ font-size:18px; }
    .result-btn{
      padding:8px 14px;
      font-size:14px;
    }
  }

  /* ≤ 400px — маленькие iPhone */
  @media (max-width: 400px){
    .logo{ font-size:26px; }
    .case{ width:100px; height:140px; }
    .case-opened{ width:98%; }
    .roulette{ height:100px; }
    .roulette-item{ width:95px; height:100px; }
  }

</style>

</head>
<body>

<div class="page-wrapper">

  <div class="logo-bar" id="logoBar">
    <div class="logo"><span class="gradient-text">StarW</span><span class="white1">1</span><span class="gradient-text">N</span></div>
  </div>

  <div class="cases-bar" id="casesBar">
    <div class="case" id="freeCase">
      <img class="case-image" src="../IMG/IMG_2086.WEBP" alt="FREE">
      <div class="case-name">FREE</div>
    </div>
  </div>

</div>

<div id="profileContainer"></div>



<script>
/* ========== АНИМАЦИЯ ШАПКИ ========== */
const logoBar = document.getElementById("logoBar");
const casesBar = document.getElementById("casesBar");

window.addEventListener("scroll", ()=>{
  let y = Math.min(window.scrollY,200);
  let o = 1 - y/200;
  logoBar.style.transform = `translate(-50%, -${y}px)`;
  logoBar.style.opacity = o;
  casesBar.style.transform = `translate(-50%, -${y}px)`;
  casesBar.style.opacity = o;
});

/* ========== ДАННЫЕ ДЛЯ КЕЙСА ========== */
const FREE_CASE_ITEMS = [
  { name:"Happy Brownie",rarity:"white",img:"../IMG/IMG_2046.WEBP" },
  { name:"Red 1",rarity:"red",img:"../IMG/IMG_2043.WEBP" },
  { name:"Red 2",rarity:"red",img:"../IMG/IMG_2010.WEBP" },
  { name:"Red 3",rarity:"red",img:"../IMG/IMG_2009.WEBP" },
  { name:"Red 4",rarity:"red",img:"../IMG/IMG_2008.WEBP" },
  { name:"Red 5",rarity:"red",img:"../IMG/IMG_2007.WEBP" },
  { name:"Red 6",rarity:"red",img:"../IMG/IMG_2006.WEBP" },
  { name:"Red 7",rarity:"red",img:"../IMG/IMG_2005.WEBP" },
  { name:"Red 8",rarity:"red",img:"../IMG/IMG_2004.WEBP" },
  { name:"Red 9",rarity:"red",img:"../IMG/IMG_2003.WEBP" },
];



/* ========== ОТКРЫТИЕ КЕЙСА ========== */
document.getElementById("freeCase").addEventListener("click",()=>{

  logoBar.style.display="none";
  casesBar.style.display="none";

  const openCase = document.createElement("div");
  openCase.className = "case-opened";
  openCase.innerHTML = `
      <div class="case-logo" id="backLogo">
        <div class="logo"><span class="gradient-text">StarW</span><span class="white1">1</span><span class="gradient-text">N</span></div>
      </div>

      <div style="color:#fff;font-size:26px;margin-top:22px;">FREE CASE</div>

      <div class="roulette" id="roulette">
        <div class="roulette-track" id="rouletteTrack"></div>
      </div>

      <button class="open-button" id="startOpen">ОТКРЫТЬ</button>

      <div class="items-list" id="itemsList"></div>

      <div class="result-block" id="resultBlock">
        <div class="result-title" id="resultTitle"></div>
        <div class="result-actions"></div>
      </div>
  `;

  document.body.appendChild(openCase);

  document.getElementById("backLogo").onclick = ()=>{
    openCase.remove();
    logoBar.style.display="flex";
    casesBar.style.display="flex";
  };


  /* СПИСОК ПРЕДМЕТОВ */
  const itemsList = document.getElementById("itemsList");
  FREE_CASE_ITEMS.forEach(it=>{
    let slot = document.createElement("div");
    slot.className = "item-slot";
    slot.innerHTML = `<img src="${it.img}"><div class="rarity ${it.rarity}"></div>`;
    itemsList.appendChild(slot);
  });


  /* РУЛЕТКА */
  const rouletteTrack = document.getElementById("rouletteTrack");
  const roulette = document.getElementById("roulette");
  const startOpen = document.getElementById("startOpen");
  const resultBlock = document.getElementById("resultBlock");
  const resultTitle = document.getElementById("resultTitle");
  const actions = resultBlock.querySelector(".result-actions");

  const seq=[];
  for(let r=0;r<30;r++){
    FREE_CASE_ITEMS.forEach(it=>seq.push(it));
  }

  seq.forEach(it=>{
    const d=document.createElement("div");
    d.className="roulette-item";
    d.innerHTML = `<img src="${it.img}">`;
    rouletteTrack.appendChild(d);
  });

  function getItemWidth(){
    const s=document.querySelector(".roulette-item");
    if(!s) return 100;
    return s.getBoundingClientRect().width;
  }

  let spinning=false;

  startOpen.onclick = ()=>{
    if(spinning) return;
    spinning=true;
    startOpen.disabled=true;

    resultBlock.style.display="none";

    const itemWidth=getItemWidth();
    const visibleWidth=roulette.getBoundingClientRect().width;
    const correction=Math.round((visibleWidth-itemWidth)/2);

    const winItem = FREE_CASE_ITEMS.find(i=>i.rarity==="white");
    const baseIndex = FREE_CASE_ITEMS.indexOf(winItem);

    const loops = 6 + Math.floor(Math.random()*3);
    const finalIndex = loops*FREE_CASE_ITEMS.length + baseIndex;
    const finalOffset = finalIndex*itemWidth - correction;

    rouletteTrack.style.transition="transform 2s linear";
    rouletteTrack.style.transform=`translateX(-1500px)`;

    setTimeout(()=>{
      rouletteTrack.style.transition="transform 3s cubic-bezier(.05,.6,.15,1)";
      rouletteTrack.style.transform=`translateX(-${finalOffset}px)`;
    },2000);

    setTimeout(()=>{
      resultTitle.textContent = `Тебе выпал: ${winItem.name}`;
      resultBlock.style.display="flex";
      spinning=false;
      startOpen.disabled=false;

      actions.innerHTML = `<button class="result-btn" style="background:#fff;color:#000;">Ок</button>`;
      actions.querySelector("button").onclick = ()=>{
        resultBlock.style.display="none";
      };

    },5200);
  };
});
</script>

</body>
</html>
