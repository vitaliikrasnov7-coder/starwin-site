@starwinapp_bot, [07.12.2025 16:04]
<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>StarW1N КЕЙСЫ</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&display=swap" rel="stylesheet">

<style>
/* --- СБРОС И АДАПТИВНОСТЬ --- */
*{box-sizing:border-box;}
html,body{
  margin:0;
  padding:0;
  width:100%;
  height:auto;
  overflow-x:hidden;
  -webkit-text-size-adjust:100%;
  background:#0a0f1a;
  font-family:'Montserrat',sans-serif;
}

/* --- ЛОГОТИП --- */
.logo-bar{
  position:fixed;
  top:0; left:0;
  width:100%;
  padding:clamp(12px,4vw,24px) 0;
  display:flex;
  justify-content:center;
  background:#0a0f1a;
  z-index:999;
  transition:transform .1s,opacity .1s;
}
.logo{
  font-weight:900;
  font-size:clamp(28px,8vw,70px);
  letter-spacing:-4px;
  transform:skewX(-12deg);
}
.gradient-text{background:linear-gradient(90deg,#4d9fff,#5d6bff,#904bff); -webkit-background-clip:text; color:transparent;}
.white1{color:#fff;}

/* --- БЛОКИ КЕЙСОВ (ГЛАВНАЯ) --- */
.cases-bar{
  position:fixed;
  top:clamp(90px,20vw,150px);
  left:0;
  width:100%;
  display:flex;
  justify-content:center;
  gap:clamp(10px,3vw,22px);
  z-index:998;
  transition:transform .1s,opacity .1s;
}

.case{
  width:clamp(120px,30vw,180px);
  aspect-ratio:0.75; /* чёткое квадратное окно */
  background:#1a1f35;
  border-radius:clamp(10px,2vw,15px);
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:clamp(6px,1.5vw,12px);
  cursor:pointer;
}

.case img.case-image{
  width:100%;
  height:clamp(80px,22vw,120px);
  object-fit:cover;
  border-radius:clamp(8px,2vw,12px);
}

.case .case-name{
  color:#fff;
  font-size:clamp(14px,4vw,22px);
  font-weight:700;
  margin-top:6px;
}

/* --- ОТКРЫТЫЙ КЕЙС --- */
.case-opened{
  position:fixed;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  width:clamp(300px,85vw,540px);
  background:#1a1f35;
  border-radius:clamp(14px,3vw,22px);
  padding:clamp(16px,3vw,26px);
  display:flex;
  flex-direction:column;
  align-items:center;
  z-index:1000;
}

.case-logo{
  position:absolute;
  top:clamp(10px,2vw,18px);
  left:clamp(10px,2vw,18px);
  cursor:pointer;
}
.case-logo .logo{
  font-size:clamp(22px,6vw,36px);
}

/* --- КНОПКА ОТКРЫТИЯ --- */
.open-button{
  margin-top:clamp(10px,2vw,16px);
  padding:clamp(8px,1.8vw,14px) clamp(14px,3vw,28px);
  background:#333;
  color:#fff;
  border:none;
  border-radius:clamp(8px,2vw,12px);
  font-size:clamp(14px,4vw,20px);
  cursor:pointer;
}
.open-button:disabled{opacity:.5; cursor:not-allowed;}

/* --- РУЛЕТКА --- */
.roulette{
  width:clamp(260px,80vw,520px);
  height:clamp(70px,20vw,110px);
  overflow:hidden;
  border-radius:clamp(10px,2vw,14px);
  margin-top:clamp(10px,2vw,18px);
  background:#000;
  border:2px solid rgba(255,255,255,.05);
  position:relative;
}
.roulette::after{
  content:"";
  position:absolute; top:0; bottom:0;
  left:50%; transform:translateX(-50%);
  width:clamp(2px,1vw,5px);
  background:rgba(255,255,255,.06);
}

.roulette-track{
  display:flex;
  position:absolute;
  top:0; left:0;
  height:100%;
}

.roulette-item{
  width:clamp(60px,18vw,120px);
  height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:clamp(4px,1vw,8px);
}

.roulette-item img{
  width:100%; height:100%;
  object-fit:contain;
  border-radius:clamp(6px,2vw,10px);
}

/* --- СПИСОК ПРЕДМЕТОВ (СЕТКА) --- */
.items-list{
  margin-top:clamp(12px,2vw,20px);
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:clamp(6px,1.2vw,14px);
}

.item-slot{
  width:clamp(50px,14vw,75px);
  aspect-ratio:0.75;
  display:flex;
  flex-direction:column;
  align-items:center;
  position:relative;
}

.item-slot img{
  width:100%;
  height:100%;
  object-fit:contain;
  border-radius:clamp(6px,2vw,10px);
}

.rarity{
  position:absolute;
  bottom:5px;
  left:50%;
  transform:translateX(-50%);
  width:clamp(7px,2vw,12px);
  height:clamp(7px,2vw,12px);
  border-radius:50%;
}
.rarity.white{background:white;}
.rarity.red{background:red;}

/* --- РЕЗУЛЬТАТ --- */
.

@starwinapp_bot, [07.12.2025 16:04]
result-block{
  margin-top:clamp(12px,2vw,20px);
  display:none;
  flex-direction:column;
  align-items:center;
}
.result-title{
  color:#fff;
  font-size:clamp(16px,4vw,26px);
  font-weight:700;
}

.result-actions{
  display:flex;
  gap:clamp(8px,2vw,16px);
  margin-top:clamp(8px,2vw,14px);
}

.result-btn{
  padding:clamp(8px,1.5vw,12px) clamp(12px,3vw,22px);
  border:none;
  border-radius:clamp(8px,2vw,12px);
  font-weight:700;
  font-size:clamp(12px,4vw,16px);
  cursor:pointer;
}
.sell{background:#ff4e4e; color:#fff;}
.keep{background:#4eff7a; color:#000;}
</style>

</head>
<body>
<!-- ВСЁ НИЖЕ – ТВОЙ ОРИГИНАЛЬНЫЙ JS+HTML, НЕ ТРОГАЛ -->
</head>
<body>

<div class="logo-bar" id="logoBar">
  <div class="logo"><span class="gradient-text">StarW</span><span class="white1">1</span><span class="gradient-text">N</span></div>
</div>

<div class="cases-bar" id="casesBar">
  <div class="case" id="freeCase">
    <img class="case-image" src="../IMG/IMG_2086.WEBP" alt="FREE">
    <div class="case-name">FREE</div>
  </div>
</div>

<script>
function setFullHeight() {
    document.documentElement.style.setProperty('--vh', `${window.innerHeight * 0.01}px`);
}
window.addEventListener('resize', setFullHeight);
setFullHeight();

const logoBar = document.getElementById("logoBar");
const casesBar = document.getElementById("casesBar");
window.addEventListener("scroll", ()=>{
    let y = Math.min(window.scrollY,200);
    let o = 1 - y/200;
    logoBar.style.transform = `translateY(-${y}px)`;
    logoBar.style.opacity = o;
    casesBar.style.transform = `translateY(-${y}px)`;
    casesBar.style.opacity = o;
});

const FREE_CASE_ITEMS = [
    { name: "Happy Brownie", rarity: "white", img: "../IMG/IMG_2046.WEBP", chance: 99.91 },
    { name: "Red 1", rarity: "red", img: "../IMG/IMG_2043.WEBP", chance: 0.01 },
    { name: "Red 2", rarity: "red", img: "../IMG/IMG_2010.WEBP", chance: 0.01 },
    { name: "Red 3", rarity: "red", img: "../IMG/IMG_2009.WEBP", chance: 0.01 },
    { name: "Red 4", rarity: "red", img: "../IMG/IMG_2008.WEBP", chance: 0.01 },
    { name: "Red 5", rarity: "red", img: "../IMG/IMG_2007.WEBP", chance: 0.01 },
    { name: "Red 6", rarity: "red", img: "../IMG/IMG_2006.WEBP", chance: 0.01 },
    { name: "Red 7", rarity: "red", img: "../IMG/IMG_2005.WEBP", chance: 0.01 },
    { name: "Red 8", rarity: "red", img: "../IMG/IMG_2004.WEBP", chance: 0.01 },
    { name: "Red 9", rarity: "red", img: "../IMG/IMG_2003.WEBP", chance: 0.01 },
];

document.getElementById("freeCase").addEventListener("click", ()=>{
    logoBar.style.display="none";
    casesBar.style.display="none";

    const openCase = document.createElement("div");
    openCase.className = "case-opened";
    openCase.innerHTML = `
      <div class="case-logo" id="backLogo">
        <div class="logo"><span class="gradient-text">StarW</span><span class="white1">1</span><span class="gradient-text">N</span></div>
      </div>
      <div style="color:#fff;font-size:5vw;font-weight:700;margin-top:3vh;text-align:center;">FREE CASE</div>
      <div class="roulette" id="roulette">
        <div class="roulette-track" id="rouletteTrack"></div>
      </div>
      <button class="open-button" id="startOpen">ОТКРЫТЬ</button>
      <div class="items-list" id="itemsList"></div>
      <div class="result-block" id="resultBlock">
        <div class="result-title" id="resultTitle"></div>
        <div class="result-actions">
          <button class="result-btn sell" id="sellBtn">Продать</button>
          <button class="result-btn keep" id="keepBtn">Оставить</button>
        </div>
      </div>
    `;
    document.body.appendChild(openCase);

    document.getElementById("backLogo").addEventListener("click", ()=>{
        openCase.remove();
        logoBar.style.display="flex";
        casesBar.style.display="flex";
    });

    const rouletteTrack = document.getElementById("rouletteTrack");
    const itemsList = document.getElementById("itemsList");
    const startOpen = document.getElementById("startOpen");
    const resultBlock = document.getElementById("resultBlock");
    const resultTitle = document.getElementById("resultTitle");
    const sellBtn = document.getElementById("sellBtn");
    const keepBtn = document.getElementById("keepBtn");
    const rouletteEl = document.getElementById("roulette");

    itemsList.innerHTML = "";
    FREE_CASE_ITEMS.forEach(item=>{
        let slot = document.createElement("div");
        slot.className="item-slot";
        let img = document.createElement("img");
        img.src = item.img;
        let r = document.createElement("div");
        r.className = "rarity " + (item.rarity === "white" ? "white" : "red");
        slot.appendChild(img);
        slot.appendChild(r);
        itemsList.appendChild(slot);
    });

    rouletteTrack.innerHTML = "";
    const repeats = 30;
    const rouletteSequence = [];
    for(let r=0;r<repeats;r++){
        FREE_CASE_ITEMS.forEach(it => rouletteSequence.push(it));
    }
    rouletteSequence.forEach(it=>{
        const d = document.createElement("div");
        d.className = "roulette-item";
        d.innerHTML = `<img src="${it.img}" alt="${it.name}" draggable="false">`;
        rouletteTrack.appendChild(d);
    });

    let isSpinning = false;
    startOpen.addEventListener("click", async ()=>{
        if(isSpinning) return;
        isSpinning = true;
        startOpen.disabled = true;
        resultBlock.style.display = "none";

        const itemWidth = rouletteTrack.querySelector(".roulette-item").getBoundingClientRect().width;
        const visibleWidth = rouletteEl.getBoundingClientRect().width;
        const centerOffsetCorrection = Math.round((visibleWidth - itemWidth)/2);

        const winItem = FREE_CASE_ITEMS.find(i => i.rarity === "white");
        const winBaseIndex = FREE_CASE_ITEMS.indexOf(winItem);

        const baseLoops = 6 + Math.floor(Math.random()*3);
        const finalIndex = baseLoops * FREE_CASE_ITEMS.length + winBaseIndex;
        const finalOffset = finalIndex * itemWidth - centerOffsetCorrection;

        const fastDistance = Math.max(1200, itemWidth * FREE_CASE_ITEMS.length * 4);
        rouletteTrack.style.transition = `transform 2.0s linear`;
        rouletteTrack.style.transform = `translateX(-${fastDistance}px)`;

        setTimeout(()=>{
            rouletteTrack.style.transition = `transform 3.0s cubic-bezier(.05,.6,.15,1)`;
            rouletteTrack.style.transform = `translateX(-${finalOffset}px)`;
        }, 2000);

        setTimeout(()=>{
            resultTitle.textContent = `Тебе выпал: ${winItem.name}`;
            resultBlock.style.display = "flex";
            isSpinning = false;
            startOpen.disabled = false;

            if(winItem.rarity === "white"){
                sellBtn.style.display = "none";
                keepBtn.style.display = "none";

                let okBtn = document.getElementById("okBtn");
                if(!okBtn){
                    okBtn = document.createElement("button");
                    okBtn.className = "result-btn";
                    okBtn.id = "okBtn";
                    okBtn.textContent = "Хорошо";
                    resultBlock.querySelector(".result-actions").appendChild(okBtn);
                }
                okBtn.style.display = "inline-block";
                okBtn.onclick = () => { resultBlock.style.display = "none"; };

            } else {
                sellBtn.style.display = "inline-block";
                keepBtn.style.display = "inline-block";
                const okBtn = document.getElementById("okBtn");
                if(okBtn) okBtn.style.display = "none";

                sellBtn.onclick = ()=> { alert("Предмет продан."); };
                keepBtn.onclick = ()=> { alert("Предмет оставлен."); };
            }
        }, 5200);
    });

});
</script>
</body>
</html>
